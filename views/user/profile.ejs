<%- include('../partials/header') %>

  <div class="container">
    <div class="profile-container">
      <h1>User Profile</h1>

      <div class="profile-card">
        <div class="profile-header">
          <div class="profile-avatar">
            <% if (user.hasProfileImage) { %>
              <img src="/user/profile-image" alt="Profile picture">
              <% } else { %>
                <!-- Display first letter of username as avatar -->
                <span>
                  <%= user.username.charAt(0) %>
                </span>
                <% } %>
          </div>
          <div class="profile-title">
            <h2>
              <%= user.username %>
            </h2>
            <p class="subtitle">Member since <%= typeof user.createdAt !=='undefined' ?
                helpers.formatDate(user.createdAt) : 'N/A' %>
            </p>
          </div>
        </div>

        <div class="profile-info">
          <div class="info-item">
            <span class="label">Email Address</span>
            <span class="value">
              <%= user.email %>
            </span>
          </div>
        </div>

        <div class="profile-actions">
          <a href="/user/settings" class="btn secondary-btn">Edit Profile</a>
        </div>
      </div>

      <!-- add new recipe (emma)-->
      <div class="profile-section add-recipe-box">
        <a href="/user/recipes/new-recipe" class="btn primary-btn add-recipe-link">âž• Add New Recipe</a>
      </div>

      <div class="profile-section">
        <h3>Your Recipes</h3>

        <% if (recipes.length===0) { %>
          <p>You haven't added any recipes yet.</p>
          <% } else { %>
            <ul class="recipe-list">
              <% recipes.forEach(recipe=> { %>
                <li>
                  <strong>
                    <%= recipe.title %>
                  </strong><br>
                  <span>
                    <%= recipe.description.substring(0, 100) %>...
                  </span><br>
                  <a href="/user/recipes/<%= recipe._id %>">View Recipe</a>
                </li>
                <% }) %>
            </ul>
            <% } %>
      </div>



      <div class="profile-section">
        <h3>Protected Content</h3>
        <p>This page is only accessible to authenticated users. You're seeing this because you're logged in!</p>
        <p>This is where your application would display user-specific content and functionality.</p>
      </div>
    </div>
  </div>

  <%- include('../partials/footer') %>